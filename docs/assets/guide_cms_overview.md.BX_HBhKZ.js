import{_ as i,o as a,c as e,ah as t}from"./chunks/framework.Zhm0w2YF.js";const E=JSON.parse('{"title":"CMS 模式概述","description":"","frontmatter":{},"headers":[],"relativePath":"guide/cms/overview.md","filePath":"guide/cms/overview.md","lastUpdated":1770072595000}'),h={name:"guide/cms/overview.md"};function n(p,s,l,k,r,o){return a(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="cms-模式概述" tabindex="-1">CMS 模式概述 <a class="header-anchor" href="#cms-模式概述" aria-label="Permalink to &quot;CMS 模式概述&quot;">​</a></h1><p>本节说明CMS模式的概念、与API模式的简要对比以及如何在CMS模式下与API共存，仅适用于CMS模式。</p><p>Anon Framework支持API模式与CMS模式两种运行模式。CMS模式面向内容管理，提供主题系统与HTML模板渲染，适合博客、官网等站点。</p><h2 id="模式切换" tabindex="-1">模式切换 <a class="header-anchor" href="#模式切换" aria-label="Permalink to &quot;模式切换&quot;">​</a></h2><p>运行模式在安装时选择，并写入 <code>server/.env.php</code>：</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">define</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ANON_APP_MODE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;cms&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 或 &#39;api&#39;</span></span></code></pre></div><p>CMS 相关配置存储在数据库 <code>options</code> 表中，可通过 <code>Anon_Cms_Options</code> 访问：</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$theme </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Anon_Cms_Options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;theme&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Default&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$routes </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> json_decode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Anon_Cms_Options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;routes&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[]&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Anon_Cms_Options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;theme&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;MyTheme&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>详细对比见 <a href="./../mode-overview.html">模式对比 API vs CMS</a>。</p><h2 id="与-api-模式共存" tabindex="-1">与 API 模式共存 <a class="header-anchor" href="#与-api-模式共存" aria-label="Permalink to &quot;与 API 模式共存&quot;">​</a></h2><p>在 CMS 模式下可同时提供 API：</p><ul><li><strong>API 路由</strong>：通过 <code>app/Router/</code> 或 <code>useRouter.php</code> 配置</li><li><strong>CMS 路由</strong>：通过 <code>options</code> 表中的 <code>routes</code> 配置</li><li><strong>API 前缀</strong>：通过 <code>options</code> 表中的 <code>apiPrefix</code> 配置，默认为 <code>/api</code></li><li>系统按请求路径分别匹配 CMS 路由与 API 路由</li></ul><p>当ANON_APP_MODE为cms时，CMS路由优先。API路由需带前缀如/api，以避免与页面路由冲突。</p><h2 id="下一步" tabindex="-1">下一步 <a class="header-anchor" href="#下一步" aria-label="Permalink to &quot;下一步&quot;">​</a></h2><ul><li><strong><a href="./routes.html">路由与页面</a></strong> — 配置 CMS 路由与模板映射</li><li><strong><a href="./theme-system.html">主题系统与开发</a></strong> — 主题结构、模板渲染与主题基础</li><li><strong><a href="./admin.html">管理后台</a></strong> — 后台入口、功能与 CMS 管理端点</li></ul>`,15)])])}const c=i(h,[["render",n]]);export{E as __pageData,c as default};
